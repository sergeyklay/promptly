(()=>{"use strict";function e(e,t){var n=document.createElement("div");n.className="row chat-message",n.setAttribute("data-entry-role",t);var o=document.createElement("div");o.className="col-12";var a=document.createElement("div");a.className="card bg-light py-2 py-md-3 border";var r=document.createElement("div");return r.className="card-body",r.textContent=e,n.appendChild(o),o.appendChild(a),a.appendChild(r),n}document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("prompt-textarea"),n=document.getElementById("send-button");t.addEventListener("input",(function(){!function(e){var t;e.style.height="auto";var n=window.getComputedStyle(e).lineHeight,o=parseFloat(n),a=8*o;console.error("computedLineHeight: ".concat(n)),console.error("numericLineHeight: ".concat(o)),console.error("maxHeight: ".concat(a)),console.error("scrollHeight: ".concat(e.scrollHeight)),e.scrollHeight>a?(t=a,e.style.overflowY="auto"):(t=e.scrollHeight,e.style.overflowY="hidden"),e.style.height="".concat(t,"px")}(t)})),t.addEventListener("keypress",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n.click())})),n.addEventListener("click",(function(){var t=document.getElementById("prompt-textarea").value,n=document.getElementById("chat-output");if(t.length>0){document.getElementById("prompt-textarea").value="";var o=e(t,"user");n.appendChild(o);var a=e("Waiting for server response","assistant");n.appendChild(a);var r=function(e){for(var t="".concat("chat_id","="),n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}();fetch("/conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,chat_id:r})}).then((function(e){return e.json()})).then((function(t){var o,c,i;o=r=t.chat_id,c="",(i=new Date).setTime(i.getTime()+2592e6),c="; expires=".concat(i.toUTCString()),document.cookie="".concat("chat_id","=").concat(o||"").concat(c,"; path=/"),a.remove();var d=e(t.message,"assistant");n.appendChild(d)})).catch((function(){a.remove()})),n.scrollTop=n.scrollHeight}}))}))})();