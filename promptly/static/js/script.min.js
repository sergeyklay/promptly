(()=>{"use strict";function e(e,t){var n=document.createElement("div");n.className="row chat-message",n.setAttribute("data-entry-role",t);var a=document.createElement("div");a.className="col-12";var o=document.createElement("div");o.className="card bg-light py-2 py-md-3 border";var r=document.createElement("div");return r.className="card-body",r.textContent=e,n.appendChild(a),a.appendChild(o),o.appendChild(r),n}document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("prompt-textarea"),n=document.getElementById("send-button");t.addEventListener("input",(function(){!function(e){var t;e.style.height="auto";var n=window.getComputedStyle(e).lineHeight,a=8*parseFloat(n);e.scrollHeight>a?(t=a,e.style.overflowY="auto"):(t=e.scrollHeight,e.style.overflowY="hidden"),e.style.height="".concat(t,"px")}(t)})),t.addEventListener("keypress",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n.click())})),n.addEventListener("click",(function(){var t=document.getElementById("prompt-textarea").value,n=document.getElementById("chat-output");if(t.length>0){document.getElementById("prompt-textarea").value="";var a=e(t,"user");n.appendChild(a);var o=e("Waiting for server response","assistant");n.appendChild(o);var r=function(e){for(var t="".concat("chat_id","="),n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}();fetch("/conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,chat_id:r})}).then((function(e){return e.json()})).then((function(t){var a,c,i;a=r=t.chat_id,c="",(i=new Date).setTime(i.getTime()+2592e6),c="; expires=".concat(i.toUTCString()),document.cookie="".concat("chat_id","=").concat(a||"").concat(c,"; path=/"),o.remove();var d=e(t.message,"assistant");n.appendChild(d)})).catch((function(){o.remove()})),n.scrollTop=n.scrollHeight}}))}))})();